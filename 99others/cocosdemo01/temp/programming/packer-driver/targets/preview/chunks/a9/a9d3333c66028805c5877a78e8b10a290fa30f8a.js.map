{"version":3,"sources":["file:///Users/gongminghua/Public/02fontstudy/99others/cocosdemo01/assets/src/scripts/playing/bg.ts"],"names":["_decorator","Component","instantiate","log","ccclass","property","b_g","tooltip","range","n1","n2","height","onLoad","num","node","children","length","parent","setPosition","position","y","start","update","deltaTime","y1","y2","speed"],"mappings":";;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,G,OAAAA,G;;;;;;;;;OACvC;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U;;qBAGjBM,G,WADZF,OAAO,CAAC,IAAD,C,UAKHC,QAAQ,CAAC;AACNE,QAAAA,OAAO,EAAC,QADF;AAENC,QAAAA,KAAK,EAAC,CAAC,IAAD,EAAM,EAAN;AAFA,OAAD,C,2BALb,MACaF,GADb,SACyBL,SADzB,CACmC;AAAA;AAAA;AAAA,eAC/BQ,EAD+B;AAAA,eAE/BC,EAF+B;AAAA,eAG/BC,MAH+B;;AAAA;AAAA;;AASrBC,QAAAA,MAAM,GAAS;AACrB,cAAIC,GAAG,GAAG,KAAKC,IAAL,CAAUC,QAAV,CAAmBC,MAA7B;;AACA,cAAGH,GAAG,IAAE,CAAR,EAAU;AACNV,YAAAA,GAAG,CAAC,mBAAD,CAAH;AACA;AACH;;AAED,cAAIM,EAAE,GAAG,KAAKK,IAAL,CAAUC,QAAV,CAAmB,CAAnB,CAAT;AACA,cAAIL,EAAE,GAAGR,WAAW,CAACO,EAAD,CAApB;AACAC,UAAAA,EAAE,CAACO,MAAH,GAAY,KAAKH,IAAjB;AAEAJ,UAAAA,EAAE,CAACQ,WAAH,cAAmBR,EAAE,CAACS,QAAtB;AAAgCC,YAAAA,CAAC,EAAEX,EAAE,CAACE;AAAtC;AAEA,eAAKF,EAAL,GAAUA,EAAV;AACA,eAAKC,EAAL,GAAUA,EAAV;AACA,eAAKC,MAAL,GAAcF,EAAE,CAACE,MAAjB;AACH;;AACDU,QAAAA,KAAK,GAAG,CAEP;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB;AAEtB,cAAG,CAAC,KAAKd,EAAN,IAAY,CAAC,KAAKC,EAArB,EAAwB;AACpB;AACH;;AACD,cAAM;AAACU,YAAAA,CAAC,EAAEI;AAAJ,cAAU,KAAKf,EAAL,CAAQU,QAAxB;AACA,cAAM;AAACC,YAAAA,CAAC,EAAEK;AAAJ,cAAU,KAAKf,EAAL,CAAQS,QAAxB;AAEA,eAAKV,EAAL,CAAQS,WAAR,cACO,KAAKT,EAAL,CAAQU,QADf;AAEIC,YAAAA,CAAC,EAAE,KAAKX,EAAL,CAAQU,QAAR,CAAiBC,CAAjB,GAAqB,KAAKM;AAFjC;AAIA,eAAKhB,EAAL,CAAQQ,WAAR,cACO,KAAKR,EAAL,CAAQS,QADf;AAEIC,YAAAA,CAAC,EAAE,KAAKV,EAAL,CAAQS,QAAR,CAAiBC,CAAjB,GAAqB,KAAKM;AAFjC;;AAKA,cAAGF,EAAE,IAAI,CAAC,KAAKb,MAAf,EAAsB;AAClB,iBAAKF,EAAL,CAAQS,WAAR,cACO,KAAKT,EAAL,CAAQU,QADf;AAEIC,cAAAA,CAAC,EAAE,KAAKT;AAFZ;AAIH;;AACD,cAAGc,EAAE,IAAI,CAAC,KAAKd,MAAf,EAAsB;AAClB,iBAAKD,EAAL,CAAQQ,WAAR,cACO,KAAKT,EAAL,CAAQU,QADf;AAEIC,cAAAA,CAAC,EAAE,KAAKT;AAFZ;AAIH,WA5BqB,CA6BtB;AACA;AACA;AACA;AACA;AACA;;AACH;;AAjE8B,O;;;;;iBAQhB,C","sourcesContent":["import { _decorator, Component, instantiate, log, Node } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('bg')\nexport class b_g extends Component {\n    n1: Node;\n    n2: Node;\n    height: number;\n    @property({\n        tooltip:\"向左移动速度\",\n        range:[0.01,10]\n    })\n    speed:number = 1;\n    protected onLoad(): void {\n        let num = this.node.children.length;\n        if(num!=1){\n            log(\"子节点循环移动只允许只有一个子节点\");\n            return\n        }\n\n        let n1 = this.node.children[0];\n        let n2 = instantiate(n1);\n        n2.parent = this.node;\n\n        n2.setPosition({...n2.position, y: n1.height})\n        \n        this.n1 = n1;\n        this.n2 = n2;\n        this.height = n1.height;\n    }\n    start() {\n\n    }\n\n    update(deltaTime: number) {\n        \n        if(!this.n1 || !this.n2){\n            return\n        }\n        const {y: y1} = this.n1.position;\n        const {y: y2} = this.n2.position;\n\n        this.n1.setPosition({\n            ...this.n1.position,\n            y: this.n1.position.y - this.speed\n        })\n        this.n2.setPosition({\n            ...this.n2.position,\n            y: this.n2.position.y - this.speed\n        })\n\n        if(y1 <= -this.height){\n            this.n1.setPosition({\n                ...this.n1.position,\n                y: this.height,\n            })\n        }\n        if(y2 <= -this.height){\n            this.n2.setPosition({\n                ...this.n1.position,\n                y: this.height,\n            })\n        }\n        // if(y1 <= -this.height){\n        //     this.n1.y = this.height\n        // }\n        // if(this.n2.y<=-this.height){\n        //     this.n2.y = this.height\n        // }\n    }\n}\n\n"]}